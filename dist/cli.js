#!/usr/bin/env node
import{consola as e}from"consola";import{cosmiconfig as g}from"cosmiconfig";async function a(n){let t=await g("rcmd").search();if(t===null)throw Error("No rcmd config found");let{config:r}=t,{envs:l,basePath:f}=r,i=Object.keys(l).map(o=>`--${o}`),[c]=n.filter(o=>i.includes(o));if(!c)throw Error("No env option specified");let u=c.replace("--",""),d=r.envs[u],p=n.filter(o=>!i.includes(o)),m=n[2],s=await fetch(`${d}/${f}/${m}?argv=${p.join(" ")}`,{headers:{authorization:`Bearer ${process.env.RCMD_SECRET}`}});if(s.status===200){let o=await s.json();e.success({message:"Successfully executed command.",additional:JSON.stringify(o.result,null,4)})}if(s.status===500||s.status===401){let o=await s.json();e.error({message:"Failed to executed command.",additional:JSON.stringify(o.error,null,4)})}if(s.status===401){let o=await s.json();e.error("Unauthorized")}}a(process.argv);
//# sourceMappingURL=cli.js.map