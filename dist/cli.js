#!/usr/bin/env node
import{consola as t}from"consola";import{cosmiconfig as p}from"cosmiconfig";async function g(n){let e=await p("rcmd").search();if(e===null)throw Error("No rcmd config found");let{config:r}=e,{envs:a,basePath:l}=r,i=Object.keys(a).map(o=>`--${o}`),[c]=n.filter(o=>i.includes(o));if(!c)throw Error("No env option specified");let f=c.replace("--",""),u=r.envs[f],d=n.filter(o=>!i.includes(o)),m=n[2],s=await fetch(`${u}/${l}/${m}?argv=${d.join(" ")}`,{headers:{authorization:`Bearer ${process.env.RCMD_SECRET}`}});if(s.status===200){let o=await s.json();t.success({message:"Successfully executed command.",additional:JSON.stringify(o.result,null,4)})}if(s.status===500||s.status===401){let o=await s.json();t.error({message:"Failed to executed command.",additional:JSON.stringify(o.error,null,4)})}if(s.status===401){let o=await s.json();t.error("Unauthorized")}}g(process.argv);export{g as main};
//# sourceMappingURL=cli.js.map