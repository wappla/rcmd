#!/usr/bin/env node
import{consola as i}from"consola";import{cosmiconfig as v}from"cosmiconfig";async function m(s){let t=await v("rcmd").search();if(t===null)throw Error("No rcmd config found");let{config:e}=t,{envs:a,basePath:f}=e,r=Object.keys(a).map(o=>`--${o}`),[c]=s.filter(o=>r.includes(o));if(!c)throw Error("No env option specified");let p=c.replace("--",""),l=e.envs[p],u=s.filter(o=>!r.includes(o)),d=s[2],n=await fetch(`${l}/${f}/${d}?argv=${u.join(" ")}`,{headers:{authorization:`Bearer ${process.env.RCMD_SECRET}`}});if(n.status===200){let o=await n.json();i.success(o)}if(n.status===500||n.status===401){let o=await n.json();i.error(o)}}m(process.argv);export{m as main};
//# sourceMappingURL=cli.js.map