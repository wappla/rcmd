import i from"arg";function p(e){let s=new URL(e).searchParams.get("argv"),r=[];return s!==null&&(r=s.split(" ")),r}async function g(e,s,r){if(e.headers.get("authorization")!==`Bearer ${process.env.RCMD_SECRET}`)return{status:401,body:{success:!1}};try{let t=p(e.url),{args:n,options:o}=s(t);return{status:200,body:{success:!0,result:await r(...n,o)}}}catch(t){return{status:500,body:{success:!1,error:{message:t.message,stack:t.stack,name:t.name,cause:t.cause}}}}}function m(e,s){let r=i(s,{permissive:!1,argv:e.slice(3)}),{_:a,...t}=r,n=Object.entries(t).reduce((o,[u,c])=>(o[u.replace("--","")]=c,o),{});return{args:a,options:n}}async function l(e,s,r){return g(e,a=>m(a,s),r)}export{m as parseArgv,l as parseCmdReq,p as parseCmdUrl,g as processCmdReq};
//# sourceMappingURL=index.js.map